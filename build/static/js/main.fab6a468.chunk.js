(this["webpackJsonppower-generation-graph"]=this["webpackJsonppower-generation-graph"]||[]).push([[0],{135:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),o=n(12),c=n.n(o),s=(n(55),n(26)),i=n.n(s),u=n(50),d=n(46),h=n(29),l=(n(57),n(9)),f=n(48),p=n.n(f),g=(n(58),n(47)),j=n(8);var b=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(new Date),c=Object(h.a)(o,2),s=c[0],f=c[1],b=Object(a.createRef)(null);Object(a.useEffect)((function(){v()}),[s]),Object(a.useEffect)((function(){var e=Math.min(500,500)/2-40;l.f(".d3-tip").remove(),l.f("svg").remove();var t=l.f(b.current).append("svg").attr("width",500).attr("height",500).append("g").attr("transform","translate(250,250)"),a=l.d(l.e),r=l.c().value((function(e){return e.value}))(l.b(n)),o=l.a().innerRadius(0).outerRadius(e),c=Object(g.a)().attr("class","d3-tip").offset([10,0]).html((function(e){return"<strong>"+e.data.key+": </strong>"+Math.round(10*e.data.value)/10+"%"}));t.selectAll("slices").data(r).enter().append("path").attr("d",o).attr("fill",(function(e){return a(e.data.key)})).attr("stroke","black").on("mouseover",c.show).on("mouseout",c.hide),t.call(c)}),[n]);var v=function(){var e=Object(d.a)(i.a.mark((function e(){var t,n,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.carbonintensity.org.uk/generation/".concat(s.toISOString(),"/pt24h"));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a={biomass:0,coal:0,imports:0,gas:0,nuclear:0,other:0,hydro:0,solar:0,wind:0},n.data.forEach((function(e){e.generationmix.forEach((function(e){a[e.fuel]+=e.perc}))})),o={},Object.entries(a).forEach((function(e){o[e[0]]=e[1]/n.data.length})),r(Object(u.a)({},o)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("h1",{children:"UK Power Generation"}),Object(j.jsx)("h4",{children:"Pie chart displaying the proportions of various forms of power generation, averaged across the selected day"}),Object(j.jsxs)("div",{children:["Date: ",Object(j.jsx)(p.a,{minDate:new Date("2018-05-12"),maxDate:new Date,placeholderText:"Pick a date",selected:s,onChange:function(e){f(e),v()},dateFormat:"dd/MM/yyyy",showYearDropdown:!0,showMonthDropdown:!0})]}),Object(j.jsx)("div",{ref:b})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,136)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(b,{})}),document.getElementById("root")),v(console.log)},55:function(e,t,n){},57:function(e,t,n){}},[[135,1,2]]]);
//# sourceMappingURL=main.fab6a468.chunk.js.map